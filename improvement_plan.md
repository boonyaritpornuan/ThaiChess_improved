# แผนการปรับปรุงโปรเจค ThaiChess

## 1. การปรับปรุงกฎหมากรุกไทย (Makruk)

### 1.1 แก้ไขกฎพื้นฐาน
- [ ] ตรวจสอบและแก้ไขการเคลื่อนที่ของหมากแต่ละประเภทให้ถูกต้อง
  - ขุน (King): เคลื่อนที่ได้ 1 ช่องในทุกทิศทาง
  - เรือ (Queen): เคลื่อนที่ได้ 1 ช่องในแนวทแยง
  - โคน (Bishop): เคลื่อนที่ได้หลายช่องในแนวทแยง
  - ม้า (Knight): เคลื่อนที่เป็นรูปตัว L
  - เม็ด (Rook): เคลื่อนที่ได้หลายช่องในแนวตั้งและแนวนอน
  - เบี้ย (Pawn): เคลื่อนที่ได้ 1 ช่องในแนวตั้ง และกินในแนวทแยง 1 ช่อง

### 1.2 เพิ่มกฎพิเศษ
- [ ] เพิ่มการเลื่อนขั้นของเบี้ย (Promotion)
  - เบี้ยขาวเลื่อนขั้นเมื่อถึงแถวที่ 3
  - เบี้ยดำเลื่อนขั้นเมื่อถึงแถวที่ 6
  - เบี้ยที่เลื่อนขั้นแล้ว (เบี้ยหงาย) เคลื่อนที่ได้ 1 ช่องในแนวทแยง
- [ ] เพิ่มกฎการนับครบ (Counting Rules)
  - เริ่มนับเมื่อไม่มีการกินหมากเป็นเวลา 64 ตา
  - ฝ่ายที่มีหมากมากกว่าต้องชนะภายในจำนวนตาที่กำหนด
  - กำหนดจำนวนตาตามหมากที่เหลือ (เช่น ถ้ามีขุน+เรือ vs ขุน = 16 ตา)
- [ ] เพิ่มการตรวจสอบการรุก (Check)
  - ตรวจสอบว่าขุนถูกคุกคามหรือไม่
  - แจ้งเตือนเมื่อขุนถูกรุก
- [ ] เพิ่มการตรวจสอบการจน (Checkmate)
  - ตรวจสอบว่าขุนถูกรุกและไม่สามารถหลบได้
  - จบเกมเมื่อฝ่ายใดฝ่ายหนึ่งถูกจน
- [ ] เพิ่มการตรวจสอบการอับ (Stalemate)
  - ตรวจสอบว่าไม่มีการเคลื่อนที่ที่ถูกต้อง แต่ขุนไม่ได้ถูกรุก
  - จบเกมเป็นเสมอเมื่อฝ่ายใดฝ่ายหนึ่งอับ

## 2. การปรับปรุงโครงสร้างโค้ด

### 2.1 ปรับปรุงโครงสร้างแพ็กเกจ
- [ ] สร้างแพ็กเกจย่อยสำหรับ AI
  - model.ai.Minimax
  - model.ai.AlphaBeta
  - model.ai.Evaluator
- [ ] สร้างแพ็กเกจย่อยสำหรับกฎของเกม
  - model.rules.MoveValidator
  - model.rules.CheckDetector
  - model.rules.CountingRules
- [ ] สร้างแพ็กเกจย่อยสำหรับหมาก
  - model.pieces.Piece (Abstract Class)
  - model.pieces.King, Queen, Bishop, Knight, Rook, Pawn

### 2.2 ใช้ Design Patterns
- [ ] ใช้ Factory Pattern สำหรับการสร้างหมาก
  - model.pieces.PieceFactory
- [ ] ใช้ Observer Pattern สำหรับการแจ้งเตือน
  - model.events.GameEvent
  - model.events.GameListener
- [ ] ใช้ Command Pattern สำหรับการเคลื่อนที่
  - model.commands.MoveCommand
  - model.commands.CommandHistory

### 2.3 เพิ่มการทดสอบ
- [ ] เพิ่ม Unit Tests
  - test.model.BoardTest
  - test.model.pieces.PieceTest
  - test.model.rules.MoveValidatorTest
  - test.model.ai.MinimaxTest
- [ ] เพิ่ม Integration Tests
  - test.integration.GamePlayTest

## 3. การปรับปรุง AI

### 3.1 ปรับปรุงอัลกอริทึม Minimax
- [ ] เพิ่ม Alpha-Beta Pruning
  - ลดจำนวนโหนดที่ต้องตรวจสอบ
  - เพิ่มความเร็วในการค้นหา
- [ ] เพิ่มความลึกในการค้นหา
  - เพิ่ม MAX_DEPTH เป็น 4-6 ระดับ
  - ใช้ Iterative Deepening
- [ ] ใช้ตารางบันทึกสถานะ (Transposition Table)
  - หลีกเลี่ยงการคำนวณซ้ำ
  - ใช้ HashMap เพื่อเก็บสถานะที่คำนวณแล้ว

### 3.2 ปรับปรุงการประเมินสถานะกระดาน
- [ ] ปรับค่าของหมาก
  - ขุน: 10000
  - เรือ: 5
  - โคน: 3
  - ม้า: 3
  - เม็ด: 5
  - เบี้ย: 1
  - เบี้ยหงาย: 2
- [ ] เพิ่มปัจจัยในการประเมิน
  - การควบคุมศูนย์กลาง
  - การป้องกันขุน
  - โครงสร้างเบี้ย
  - การคุกคาม
- [ ] ใช้ตารางตำแหน่ง (Piece-Square Tables)
  - ให้ค่าแตกต่างกันตามตำแหน่งของหมาก

### 3.3 เพิ่มระดับความยาก
- [ ] เพิ่มตัวเลือกระดับความยาก
  - ง่าย: ความลึก 2, มีการสุ่ม
  - ปานกลาง: ความลึก 3-4, ไม่มีการสุ่ม
  - ยาก: ความลึก 5-6, ใช้เทคนิคขั้นสูง

## 4. การปรับปรุง UI

### 4.1 ปรับปรุงการแสดงผล
- [ ] ใช้รูปภาพแทนตัวอักษรสำหรับหมาก
  - สร้างหรือหารูปภาพสำหรับหมากแต่ละประเภท
  - ใช้ ImageIcon ใน Swing
- [ ] เพิ่มการแสดงประวัติการเคลื่อนที่
  - แสดงรายการการเคลื่อนที่ทั้งหมด
  - ใช้ JList หรือ JTable
- [ ] เพิ่มการแสดงสถานะของเกม
  - แสดงตาของใคร
  - แสดงหมากที่ถูกกิน
  - แสดงเวลา (ถ้ามี)

### 4.2 เพิ่มเมนูและปุ่มควบคุม
- [ ] เพิ่มเมนูหลัก
  - เริ่มเกมใหม่
  - บันทึกเกม
  - โหลดเกม
  - ตั้งค่า
  - ออกจากเกม
- [ ] เพิ่มปุ่มควบคุม
  - ย้อนกลับ
  - เดินหน้า
  - ยอมแพ้
  - เสนอเสมอ

### 4.3 เพิ่มการแจ้งเตือน
- [ ] เพิ่มการแจ้งเตือนเมื่อเกมจบ
  - แสดงผู้ชนะ
  - แสดงเหตุผล (จน, อับ, ยอมแพ้, เสมอ)
- [ ] เพิ่มการแจ้งเตือนเมื่อขุนถูกรุก
  - ไฮไลท์ขุนที่ถูกรุก
  - แสดงข้อความแจ้งเตือน
- [ ] เพิ่มการแจ้งเตือนเมื่อมีการเคลื่อนที่ที่ไม่ถูกต้อง
  - แสดงข้อความแจ้งเตือน

## 5. การเพิ่มฟีเจอร์อื่นๆ

### 5.1 การบันทึกและโหลดเกม
- [ ] เพิ่มการบันทึกเกม
  - บันทึกในรูปแบบ JSON หรือ XML
  - บันทึกประวัติการเคลื่อนที่ทั้งหมด
- [ ] เพิ่มการโหลดเกม
  - โหลดจากไฟล์ที่บันทึกไว้
  - สร้างกระดานและประวัติการเคลื่อนที่ใหม่

### 5.2 การตั้งค่า
- [ ] เพิ่มการตั้งค่าความยากของ AI
  - ง่าย, ปานกลาง, ยาก
- [ ] เพิ่มการตั้งค่าการแสดงผล
  - ขนาดกระดาน
  - ธีมสี
  - รูปแบบหมาก

### 5.3 การเล่นกับผู้เล่นอื่น
- [ ] เพิ่มโหมดเล่น 2 คน
  - เล่นบนเครื่องเดียวกัน
  - สลับตาระหว่างผู้เล่น 2 คน

## 6. การทดสอบและแก้ไขข้อผิดพลาด

### 6.1 การทดสอบกฎ
- [ ] ทดสอบการเคลื่อนที่ของหมากแต่ละประเภท
- [ ] ทดสอบกฎพิเศษ (การเลื่อนขั้นของเบี้ย, การนับครบ)
- [ ] ทดสอบการรุก, การจน, และการอับ

### 6.2 การทดสอบ AI
- [ ] ทดสอบการทำงานของ Minimax และ Alpha-Beta Pruning
- [ ] ทดสอบการประเมินสถานะกระดาน
- [ ] ทดสอบระดับความยากต่างๆ

### 6.3 การทดสอบ UI
- [ ] ทดสอบการแสดงผลและการโต้ตอบ
- [ ] ทดสอบเมนูและปุ่มควบคุม
- [ ] ทดสอบการแจ้งเตือน

## 7. การจัดทำเอกสาร

### 7.1 การจัดทำ README
- [ ] อธิบายวิธีการติดตั้งและใช้งาน
- [ ] อธิบายกฎของหมากรุกไทย
- [ ] อธิบายฟีเจอร์ต่างๆ

### 7.2 การจัดทำ JavaDoc
- [ ] เพิ่ม JavaDoc สำหรับคลาสและเมธอดทั้งหมด
- [ ] อธิบายการทำงานของแต่ละส่วน

### 7.3 การจัดทำคู่มือผู้ใช้
- [ ] อธิบายวิธีการเล่น
- [ ] อธิบายการใช้งานฟีเจอร์ต่างๆ
- [ ] อธิบายการตั้งค่า
